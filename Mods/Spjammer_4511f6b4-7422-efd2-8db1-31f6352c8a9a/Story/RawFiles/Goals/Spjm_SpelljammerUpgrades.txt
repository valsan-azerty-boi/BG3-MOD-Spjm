Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
//REGION SPJM Spelljammer Upgrade Device dialog

PROC
PROC_ProcessUseOfItem((CHARACTER)_Player, (GUIDSTRING)S_SPJM_Ship_AstralEnhancementDevice_923fcb9e-0b18-45d9-9358-575bdf62b809, _)
AND
NOT IsLocked((GUIDSTRING)S_SPJM_Ship_AstralEnhancementDevice_923fcb9e-0b18-45d9-9358-575bdf62b809, 1)
AND
NOT QRY_StartDialog_Fixed((DIALOGRESOURCE)Dialog_SpelljammerShip_AstralEnhDevice_856b9f03-e250-143e-74f3-f5f4613712c3, (GUIDSTRING)_Player, (GUIDSTRING)S_SPJM_Ship_AstralEnhancementDevice_923fcb9e-0b18-45d9-9358-575bdf62b809)
THEN
PROC_TryStartAD((DIALOGRESOURCE)Dialog_SpelljammerShip_AstralEnhDevice_856b9f03-e250-143e-74f3-f5f4613712c3, (GUIDSTRING)_Player, (GUIDSTRING)S_SPJM_Ship_AstralEnhancementDevice_923fcb9e-0b18-45d9-9358-575bdf62b809);

//END_REGION

//REGION SPJM Spelljammer Upgrade Ballistae

IF
DB_GlobalFlag((FLAG)SPJM_Spelljammer_Ship_Ballistae_Unlocked_1064032c-df91-4ecb-b409-aa3969da66ef)
AND
DB_Players(_Player)
THEN
AddSpell((CHARACTER)_Player, "ProjectileStrike_Spjm_ShipStrike_Ballistae", 1, 0);
//SetOnStage((GUIDSTRING)SPJM_Spelljammer_Upgrade_Ballistae_191d2cab-cfef-4c82-8a0f-d7a6b3c1c586, 1);
//SetVisible((GUIDSTRING)SPJM_Spelljammer_Upgrade_Ballistae_191d2cab-cfef-4c82-8a0f-d7a6b3c1c586, 1);
//TeleportToPosition((GUIDSTRING)SPJM_Spelljammer_Upgrade_Ballistae_191d2cab-cfef-4c82-8a0f-d7a6b3c1c586, -53.785, 10.774, -21.255, "", 0, 0, 0, 0, 0);

//END_REGION

//REGION SPJM Spelljammer Upgrade Canon

IF
DB_GlobalFlag((FLAG)SPJM_Spelljammer_Ship_Canon_Unlocked_88741912-bd5d-42f0-a686-488ba6b79eea)
AND
DB_Players(_Player)
THEN
AddSpell((CHARACTER)_Player, "ProjectileStrike_Spjm_ShipStrike_Canon", 1, 0);
//SetOnStage((GUIDSTRING)SPJM_Spelljammer_Upgrade_Canon_52120269-96c2-47c5-9250-ecd204bddc66, 1);
//SetVisible((GUIDSTRING)SPJM_Spelljammer_Upgrade_Canon_52120269-96c2-47c5-9250-ecd204bddc66, 1);
//TeleportToPosition((GUIDSTRING)SPJM_Spelljammer_Upgrade_Canon_52120269-96c2-47c5-9250-ecd204bddc66, 13.267, -2.035, -2.266, "", 0, 0, 0, 0, 0);

//END_REGION
EXITSECTION

ENDEXITSECTION
